<style type="text/css">
  body { font-family: 'Jeju Myeongjo', serif; }
  h1, h4 { font-weight: bold; }
</style>

<div class="menu">
    <h1 class="title">Filter by Allergy . . .</h1>

<!--- custom 검색옵션 -->
    <button id="custom" class="mbutton fill">내 알러지정보 불러오기</button>
    <div id="myinfo" class="getinfo">
        <%= render partial: 'custom' %>
    </div>
    
    <%# location은 partial location2는 그냥 %>
    <div class="original-check">
        <%= form_tag(menus_path, method: :get) do %>
            <div class="ziyuk d-flex justify-content-around">
                <div class="sido">
                <%#= select :sido, options_for_select([["서울특별시", "서울특별시"], ["부산광역시","부산광역시"], ["대구광역시","대구광역시"],["60대이상","60대이상"]]) %>  
                    <select name="sido" class="origin-sido options selectcss">
                        <option value="서울특별시" class="sido-opt">서울특별시</option>
                        <option value="부산광역시" class="sido-opt">부산광역시</option>
                        <option value="대구광역시" class="sido-opt">대구광역시</option> 
                        <option value="인천광역시" class="sido-opt">인천광역시</option>     
                        <option value="광주광역시" class="sido-opt">광주광역시</option>
                        <option value="대전광역시" class="sido-opt">대전광역시</option>
                        <option value="세종특별자치시" class="sido-opt">세종특별자치시</option> 
                        <option value="경기도" class="sido-opt">경기도</option>
                        <option value="강원도" class="sido-opt">강원도</option>
                        <option value="충청북도" class="sido-opt">충청북도</option>
                        <option value="충청남도" class="sido-opt">충청남도</option> 
                        <option value="전라북도" class="sido-opt">전라북도</option>
                        <option value="전라남도" class="sido-opt">전라남도</option>
                        <option value="경상북도" class="sido-opt">경상북도</option>
                        <option value="경상남도" class="sido-opt">경상남도</option> 
                        <option value="제주특별자치시" class="sido-opt">제주특별자치시</option>
                    </select>
                </div>

                <div class="sigungu d-flex">
                    <div class="buttons">
                        <div class="jikjup enteropt">시군구 입력</div>
                        <div class="all enteropt">시군구 전체</div>
                    </div>
                    <div class="enter">
                    <%# 직접 입력할 경우 아래와 같은 field 뜨게%>
                        <%= text_field_tag :sigungu, params[:sigungu], :class => "sigungu-enter options", :id => "location2", :placeholder => "시군구 직접 입력"%>
                    </div>
                </div>
            </div>

            <br>
            <div class="d-flex justify-content-between original-check">
                <div>
                    <div class="a-type"><div class="d-flex typebox justify-content-around"><div class="typename">유제품 및 난류</div><i class="downic fas fa-caret-down"></i></div></div>
                    <div class="allergy-check">
                        <%= check_box_tag :a9_nanryu, checked = true%> 난류<br>
                        <%= check_box_tag :a10_milk, checked = true%> 우유<br>
                    </div>
                </div>
                <div>
                    <div class="a-type"><div class="d-flex typebox justify-content-around"><div class="typename">과채류 및 곡류</div><i class="downic fas fa-caret-down"></i></div></div>
                    <div class="allergy-check">
                        <%= check_box_tag :a6_peach, checked = true%> 복숭아<br>
                        <%= check_box_tag :a7_tomato, checked = true%> 토마토<br>
                        <%= check_box_tag :a1_maemil, checked = true%> 메밀<br>
                        <%= check_box_tag :a2_mil, checked = true%> 밀<br>
                        <%= check_box_tag :a3_daedu, checked = true%> 대두(콩)<br>
                    </div>
                </div>
                <div>
                    <div class="a-type"><div class="d-flex typebox justify-content-around"><div class="typename">육류</div><i class="downic fas fa-caret-down"></i></div></div>
                    <div class="allergy-check">
                        <%= check_box_tag :a11_ddakgogi, checked = true%> 닭고기<br>
                        <%= check_box_tag :a12_shoigogi, checked = true%> 쇠고기<br>
                        <%= check_box_tag :a8_piggogi, checked = true%> 돼지고기<br>
                    </div>
                </div>
                <div>
                    <div class="a-type"><div class="d-flex typebox justify-content-around"><div class="typename">어패류</div><i class="downic fas fa-caret-down"></i></div></div>
                    <div class="allergy-check d-flex">
                        <div>
                            <%= check_box_tag :a13_saewoo, checked = true%> 새우<br>
                            <%= check_box_tag :a14_godeungeoh, checked = true%> 고등어<br>
                            <%= check_box_tag :a15_honghap, checked = true%> 홍합<br>
                            <%= check_box_tag :a16_junbok, checked = true%> 전복<br>
                        </div>
                        <div class="fish2">
                            <%= check_box_tag :a17_gul, checked = true%> 굴<br>
                            <%= check_box_tag :a18_jogaeryu, checked = true%> 조개류<br>
                            <%= check_box_tag :a19_gye, checked = true%> 게<br>
                            <%= check_box_tag :a20_ohjingeoh, checked = true%> 오징어<br>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="a-type"><div class="d-flex typebox justify-content-around"><div class="typename fruits">과류, 아황산 등</div><i class="downic fas fa-caret-down"></i></div></div>
                    <div class="allergy-check">
                        <%= check_box_tag :a4_hodu, checked = true%> 호두<br>
                        <%= check_box_tag :a5_ddangkong, checked = true%> 땅콩<br>
                        <%= check_box_tag :a21_ahwangsan, checked = true%> 아황산류<br>
                    </div>
                </div>
                
                <button type="submit" class="a-submit">
                 Search<i class="fas fa-search"></i>
                 </button>
            </div>
                
        <%end%>
    
    </div>
</div>
    
<%# <button id="reset" onClick="funcreset()">초기화</button> %>
<%# <p id="myinfo" style="display:none;">로그인해주세요</p> %>


<script>

    $("#custom-alert").click(function(){
        alert("로그인이 필요한 기능입니다");
    });

    $(".all").click(function(){
         if( $(".jikjup").hasClass("experiment")){
            $(".jikjup").removeClass("experiment");
            $(".sigungu-enter").css('visibility','hidden');
        }

        $("#location2").val("전체");
        $("#location").val("전체");
        $(this).toggleClass("experiment");
         
    });

       //experiment는 눌렸다는 것 임시로 표시하기 위해서.
    $(".jikjup").click(function(){
        $("#location2").val("");
        $("#location").val("");
        if( $(".all").hasClass("experiment")){
            $(".all").removeClass("experiment");
        }
        
        $(this).toggleClass("experiment");

        if ( $(".sigungu-enter").css('visibility')=='hidden'){
            $(".sigungu-enter").css('visibility', 'visible');
        }
        else
            $(".sigungu-enter").css('visibility','hidden');

    });

    $("#custom").click(function(){
        if( $(this).html() == "내 알러지정보 불러오기")
        {   
            $(".original-check").addClass("getinfo");
            $("#myinfo").removeClass("getinfo");
            $(".allergy-check").css('visibility','visible');
            $(".downic").removeClass("fa-caret-down");
            $(".downic").addClass("fa-caret-up");
            $(this).html("되돌리기");
            
            $(".custom-sido").val($(".origin-sido").val());

            if($("#location2").val()=="전체"){
                $(".all").addClass("experiment");
            }
           
            else {
                 $(".jikjup").addClass("experiment");
            }
               

            $("#location").val($("#location2").val());
        }
        else
        {
            $(".original-check").removeClass("getinfo");
            $("#myinfo").addClass("getinfo");
            $(this).html("내 알러지정보 불러오기");
            
          if($("#location").val()=="전체"){
                $(".all").addClass("experiment");
            }
            
            else {

                 $(".all").removeClass("experiment");
            }

            $(".origin-sido").val($(".custom-sido").val());
            $("#location2").val($("#location").val());
        }

    });

    $('.a-type').click(function() {
        //toggle class 가 안먹음.
        if ( $(this).next(".allergy-check").css('visibility') == 'hidden' ){
            //내릴 때. 
            $(this).next(".allergy-check").css('visibility','visible');
            $(this).children(".typebox").children(".downic").removeClass("fa-caret-down");
            $(this).children(".typebox").children(".downic").addClass("fa-caret-up");
        }
        else{
            //올릴 때.
            $(this).next(".allergy-check").css('visibility','hidden');
             $(this).children(".typebox").children(".downic").removeClass("fa-caret-up");
             $(this).children(".typebox").children(".downic").addClass("fa-caret-down");
            
        }
    });


    
</script>

